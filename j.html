<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Basic Expense Tracker</title>
<style>
  body {
    font-family: Arial, sans-serif;
    max-width: 600px;
    margin: 30px auto;
    padding: 0 20px;
  }
  h1 {
    text-align: center;
  }
  form {
    margin-bottom: 20px;
  }
  label {
    display: block;
    margin-top: 10px;
  }
  input, textarea {
    width: 100%;
    padding: 6px;
    margin-top: 4px;
    box-sizing: border-box;
  }
  button {
    margin-top: 15px;
    padding: 8px 12px;
    width: 100%;
    cursor: pointer;
    border: none;
    font-size: 1em;
  }
  button#add-expense-btn {
    background-color: #28a745; 
    color: white;
  }
  button#add-expense-btn:hover {
    background-color: #218838;
  }
  #search-input, #search-date {
    padding: 6px;
    box-sizing: border-box;
  }
  .search-container {
    display: flex;
    gap: 10px;
    margin-bottom: 15px;
  }
  .search-container label {
    flex-basis: 100%;
    margin-top: 0;
  }
  .search-container > div {
    flex: 1;
    display: flex;
    flex-direction: column;
  }
  table {
    width: 100%;
    border-collapse: collapse;
  }
  thead th {
    border-bottom: 2px solid #333;
    padding: 8px;
    text-align: left;
    background: #f0f0f0;
  }
  tbody td {
    border-bottom: 1px solid #ccc;
    padding: 8px;
    vertical-align: top;
  }
  
  .expense-amount {
    font-weight: bold;
  }
  .delete-btn {
    background-color: #dc3545; 
    border: none;
    color: white;
    padding: 6px 12px;
    cursor: pointer;
    font-weight: bold;
    border-radius: 4px;
    font-size: 0.9em;
  }
  .delete-btn:hover {
    background-color: #c82333;
  }
  .balance {
    font-weight: bold;
    font-size: 1.2em;
    margin-bottom: 20px;
    text-align: center;
  }
</style>
</head>
<body>

<h1>Expense Tracker</h1>

<div class="balance" id="balance">Total Expenses: ₹0.00</div>

<form id="expense-form">
  <label for="name">Expense Name</label>
  <input type="text" id="name" placeholder="e.g. Grocery" required />

  <label for="amount">Amount (₹)</label>
  <input type="number" id="amount" placeholder="e.g. 500" step="0.01" required />

  <label for="description">Description</label>
  <textarea id="description" placeholder="Optional description"></textarea>

  <label for="date">Date</label>
  <input type="date" id="date" required />

  <button id="add-expense-btn" type="submit">Add Expense</button>
</form>

<div class="search-container">
  <div>
    <label for="search-input">Search Expenses (by Name)</label>
    <input type="text" id="search-input" placeholder="Search expenses by name..." />
  </div>

  <div>
    <label for="search-date">Filter by Date</label>
    <input type="date" id="search-date" />
  </div>
</div>

<h3>Expenses</h3>
<table id="expenses-table" aria-label="List of expenses">
  <thead>
    <tr>
      <th>Name</th>
      <th>Amount (₹)</th>
      <th>Description</th>
      <th>Date</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody id="expenses-list">
  </tbody>
</table>

<script>
  const form = document.getElementById('expense-form');
  const balanceEl = document.getElementById('balance');
  const expensesList = document.getElementById('expenses-list');
  const searchInput = document.getElementById('search-input');
  const searchDateInput = document.getElementById('search-date');

  let expenses = [];

  function updateTotal(filteredExpenses = null) {
    const list = filteredExpenses || expenses;
    const total = list.reduce((sum, exp) => sum + exp.amount, 0);
    balanceEl.textContent = `Total Expenses: ₹${total.toFixed(2)}`;
  }

  function renderExpenses(filteredExpenses = null) {
    const list = filteredExpenses || expenses;
    expensesList.innerHTML = '';
    list.forEach((exp) => {
      const tr = document.createElement('tr');

      tr.innerHTML = `
        <td>${exp.name}</td>
        <td class="expense-amount">₹${exp.amount.toFixed(2)}</td>
        <td>${exp.description ? exp.description : ''}</td>
        <td>${exp.date}</td>
        <td><button class="delete-btn" aria-label="Delete expense ${exp.name}">Delete</button></td>
      `;

      tr.querySelector('button').addEventListener('click', () => {
        const actualIndex = expenses.indexOf(exp);
        if (actualIndex > -1) {
          expenses.splice(actualIndex, 1);
          filterAndRender();
        }
      });

      expensesList.appendChild(tr);
    });
  }

  function filterAndRender() {
    const query = searchInput.value.trim().toLowerCase();
    const dateFilter = searchDateInput.value;

    let filtered = expenses;

    if (query) {
      filtered = filtered.filter(exp => exp.name.toLowerCase().includes(query));
    }

    if (dateFilter) {
      filtered = filtered.filter(exp => exp.date === dateFilter);
    }

    renderExpenses(filtered);
    updateTotal(filtered);
  }

  form.addEventListener('submit', e => {
    e.preventDefault();
    const name = form.name.value.trim();
    const amount = parseFloat(form.amount.value);
    const description = form.description.value.trim();
    const date = form.date.value;

    if (!name || isNaN(amount) || amount <= 0 || !date) {
      alert('Please fill in all required fields with valid values.');
      return;
    }

    expenses.push({ name, amount, description, date });

    form.reset();
    filterAndRender();
  });

  searchInput.addEventListener('input', filterAndRender);
  searchDateInput.addEventListener('input', filterAndRender);

  renderExpenses();
  updateTotal();
</script>
</body>
</html>
